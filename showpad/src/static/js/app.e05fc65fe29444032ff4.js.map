{"version":3,"sources":["webpack:///./src/modules/showpad.js","webpack:///./src/modules/templating.js","webpack:///src/components/SlideshowTemplater.vue","webpack:///./src/components/SlideshowTemplater.vue?ae2f","webpack:///./src/components/SlideshowTemplater.vue","webpack:///src/App.vue","webpack:///./src/App.vue?3767","webpack:///./src/App.vue","webpack:///./src/main.js"],"names":["showpad","waitForShowpadLib","promise_default","a","resolve","reject","window","ShowpadLib","timer","setTimeout","Error","onShowpadLibLoaded","clearTimeout","getConfigJson","url","decodeURIComponent","frameElement","src","split","fetch","then","data","json","catch","getAssetsByTags","tagArray","assets","getThumbnailImage","asset","size","getAssetPreviewUrl","id","slug","saveLocally","blob","name","downloadA","document","createElement","body","appendChild","style","URL","createObjectURL","href","download","click","revokeObjectURL","saveToMyFiles","upload","file","filename","statusEmitter","on","error","getApiConfig","getShowpadApi","getAssetById","apiConfig","method","withCredentials","credentials","headers","Authorization","accessToken","resp","console","log","r","templating","Templater","classCallCheck_default","this","archive","undefined","type","vars","jszip","loadAsync","d","p","length","async","origString","_iterator","get_iterator_default","matchAll","_iteratorNormalCompletion","_step","next","done","match","value","push","_iterator3","_iteratorNormalCompletion3","_step3","map","moddedString","replace","m","p1","generateAsync","SlideshowTemplater","mounted","_this","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","templates","sent","stop","mode","selected","templater","inputError","finalMap","methods","select","template","_this2","_callee2","fullAsset","downloadUrl","_context2","t0","t1","t2","call","response","shortLivedDownloadLink","parse","reset","generate","_this3","form_elems","getElementsByClassName","_didIteratorError","_iteratorError","elem","label","children","firstChild","innerText","input","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_elem","_callee3","dt","date_part","_context3","Date","getFullYear","toString","getMonth","getDay","downloadBlob","toLowerCase","endsWith","myFilesBlob","components_SlideshowTemplater","render","_vm","_h","$createElement","_c","_self","attrs","_v","_e","tag","_l","key","staticClass","$event","_s","varName","directives","rawName","expression","domProps","target","composing","staticRenderFns","App","components","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","config","productionTip","el"],"mappings":"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","file":"static/js/app.e05fc65fe29444032ff4.js","sourcesContent":["import fetch from 'node-fetch'; // remove for prod\n\n// Wait for ShowpadLib\nfunction waitForShowpadLib() {\n  return new Promise((resolve, reject) => {\n    if (window.ShowpadLib) {\n      resolve();\n    } else {\n      const timer = setTimeout(() => {\n        reject(new Error(\"ShowpadLib timed out.\"))\n      }, 2000);\n      window.onShowpadLibLoaded = () => {\n        clearTimeout(timer);\n        resolve();\n      }\n    }\n  });\n}\n// Get config.json\nfunction getConfigJson() {\n  return new Promise((resolve, reject) => {\n    const url = decodeURIComponent(window.frameElement.src.split('configUrl=')[1]).split('&')[0];\n    fetch(url)\n      .then((data) => {\n        return data.json();\n      })\n      .then(resolve)\n      .catch(reject);\n  });\n}\n// Fetch by tags\nfunction getAssetsByTags(tagArray) {\n  return new Promise((resolve, reject) => {\n    if (!window.ShowpadLib.getAssetsByTags(tagArray, (assets) => {\n      if (assets) {\n        resolve(assets);\n      } else {\n        reject(new Error('Something went wrong while fetching assets by tag.'));\n      }\n    })) {\n      reject(new Error('Something went wrong while fetching assets by tag.'));\n    }\n  });\n}\n// Get thumbnails\nfunction getThumbnailImage(asset, size) {\n  return window.ShowpadLib.getAssetPreviewUrl(asset.id, asset.slug, size || 1000);\n}\n// Download\nfunction saveLocally(blob, name) {\n  const downloadA = document.createElement('a');\n  document.body.appendChild(downloadA);\n  downloadA.style = \"display: none\";\n  const url = window.URL.createObjectURL(blob);\n  downloadA.href = url;\n  downloadA.download = name;\n  downloadA.click();\n  window.URL.revokeObjectURL(url);\n}\n// or send to My Files\nfunction saveToMyFiles(blob, name) {\n  return new Promise((resolve, reject) => {\n    const upload = {\n      file: blob,\n      filename: name\n    };\n    const statusEmitter = window.ShowpadLib.upload(upload);\n    statusEmitter.on('success', (data) => {\n      resolve(data.asset.id);\n    });\n    statusEmitter.on('failed', (error) => {\n      reject(error);\n    });\n  })\n}\n\nfunction getApiConfig() {\n  return new Promise((resolve, reject) => {\n    const timer = setTimeout(() => {\n      reject(new Error('Showpad API config timed out'));\n    }, 5000);\n    window.ShowpadLib.getShowpadApi((data) => {\n      if (data.error === null) {\n        window.clearTimeout(timer);\n        resolve(data);\n      } else {\n        reject(data.error);\n      }\n    });\n  });\n};\n\nfunction getAssetById(id, apiConfig) {\n  return new Promise((resolve, reject) => {\n    fetch(`${apiConfig.url}/api/v3/assets/${id}.json`, {\n      method: 'GET',\n      withCredentials: true,\n      credentials: 'include',\n      headers: {\n        'Authorization' : `Bearer ${apiConfig.accessToken}`\n      }\n    })\n    .then((resp) => {\n      console.log(resp);\n      return resp.json();\n    })\n    .then(resolve)\n    .catch(reject);\n  });\n};\n\n\nexport default {waitForShowpadLib, getConfigJson, getAssetsByTags, getThumbnailImage, saveLocally, saveToMyFiles, getApiConfig, getAssetById};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/showpad.js","import jszip from 'jszip';\n\n// Unzip file\n// Regex search all slides for {{ key }}, return as ordered array\n// Regex replace all placeholders with their values based on a dictionary\n// Rezip file\n\nconst r = /{{\\s*([a-zA-Z0-9]+\\s*[a-zA-Z0-9]+)\\s*}}/g;\n\nclass Templater {\n  constructor() {\n    this.archive = undefined;\n    this.type = undefined;\n    this.vars = [];\n  }\n\n  async parse(document) {\n    // load document\n    this.archive = await jszip.loadAsync(document);\n    // determine whether it's a pptx or a docx\n    const d = this.archive.file(/word\\/document.xml/);\n    const p = this.archive.file(/slides\\/slide\\d\\.xml/);\n    if (d.length > 0) {\n      this.type = 'docx';\n      console.log('Identified .DOCX');\n      // contained in one xml file\n      const origString = await d[0].async('string');\n      // find all keys\n      for (const match of origString.matchAll(r)) {\n        this.vars.push(match[1]);\n      }\n    } else if (p.length > 0) {\n      console.log('Identified .PPTX');\n      this.type = 'pptx';\n      // contained in multiple xml files\n      for (const file of p) {\n        const origString = await file.async('string');\n        // find all keys\n        for (const match of origString.matchAll(r)) {\n          this.vars.push(match[1]);\n        }\n      }\n    } else {\n      throw new Error('Failed to identify file as .docx or .pptx')\n    }\n    // filter repeated keys\n    // this.vars = Array.from(new Set(this.vars));\n    return this.vars;\n  }\n  \n  async replace(map, type) {\n    if (this.type === 'docx') {\n      const origString = await this.archive.file(/word\\/document.xml/)[0].async('string');\n      // replace or empty\n      const moddedString = origString.replace(r, (m, p1) => {\n        if (map[p1]) {\n          return map[p1];\n        } else {\n          return '';\n        }\n      });\n      this.archive.file(this.archive.file(/word\\/document.xml/)[0].name, moddedString);\n    } else if (this.type === 'pptx') {\n      for (const file of this.archive.file(/slides\\/slide\\d\\.xml/)) {\n        const origString = await file.async('string');\n        // replace or empty\n        const moddedString = origString.replace(r, (m, p1) => {\n          if (map[p1]) {\n            return map[p1];\n          } else {\n            return '';\n          }\n        });\n        this.archive.file(file.name, moddedString);\n      }\n    }\n    return this.archive.generateAsync({type: type || 'blob'});\n  }\n}\n\nexport default {Templater};\n\n\n// WEBPACK FOOTER //\n// ./src/modules/templating.js","<template>\n  <div id=\"wrapper\">\n    <transition name=\"slide-fade\">\n    <div v-if=\"mode == 'begin'\">\n      <h1>Select a template:</h1>\n      <span v-if=\"templates.length == 0\">Loading templates...</span>\n      <div id=\"template_container\">\n        <transition-group name=\"slide-fade\" tag=\"div\">\n        <fieldset class=\"template\" v-for=\"template in templates\" v-bind:key=\"template.id\" @click=\"select(template)\">\n          <legend class=\"t_name\">{{template.name}}</legend>\n          <div>\n            <img class=\"t_image\" :src=\"getThumbnailImage(template)\">\n          </div>\n        </fieldset>\n        </transition-group>\n      </div>\n    </div>\n    </transition>\n    <transition name=\"slide-fade\">\n    <div v-if=\"mode == 'template'\">\n      <h1>Specify Substitutions:</h1>\n      <span v-if=\"!vars\">Processing template...</span>\n      <table>\n        <transition-group name=\"slide-fade-side\" tag=\"div\">\n          <tr class=\"form_field\" v-for=\"varName in vars\" v-bind:key=\"varName\">\n            <td><label>{{varName}}</label></td>\n            <td><input type=\"text\"></td>\n          </tr>\n        </transition-group>\n      </table>\n      <transition name=\"slide-fade-side\">\n        <div id=\"inputError\" v-if=\"inputError\">{{inputError}}</div>\n      </transition>\n      <div class=\"button_container\">\n        <button @click=\"reset()\">Cancel</button>\n        <button @click=\"generate()\" class=\"ok_b\">Generate Document</button>\n      </div>\n    </div>\n    </transition>\n    <transition name=\"slide-fade\">\n    <div v-if=\"mode == 'confirm'\">\n      <h1>Download:</h1>\n      <label>Filename:</label><input type=\"text\" v-model=\"name\">\n      <transition name=\"slide-fade-side\">\n        <div id=\"inputError\" v-if=\"inputError\">{{inputError}}</div>\n      </transition>\n      <div class=\"button_container\">\n        <button @click=\"downloadBlob()\" class=\"ok_b finalb\">Download</button>\n        <button @click=\"myFilesBlob()\" class=\"ok_b_b finalb\">Upload to My Files</button>\n      </div>\n      <button @click=\"reset()\" class=\"finalb\">Return to Templates</button>\n    </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport showpad from '../modules/showpad.js';\nimport templating from '../modules/templating.js';\nimport { isFulfilled } from 'q';\n\nexport default {\n  name: 'SlideshowTemplater',\n  mounted() {\n    (async () => {\n      await showpad.waitForShowpadLib();\n      this.templates = (await showpad.getConfigJson()).assets;\n      console.log(this.templates);\n    })()\n    this.mode = 'begin';\n  },\n  data() {\n    return {\n      // modes:\n      // begin - selecting template\n      // template - making substitutions\n      // confirm - downloading or uploading\n      mode: 'init',\n      templates: [],\n      selected: undefined,\n      templater: undefined,\n      vars: undefined,\n      inputError: undefined,\n      finalMap: undefined,\n      blob: undefined,\n      name: \"\"\n    }\n  },\n  methods: {\n    getThumbnailImage(asset) {\n      return showpad.getThumbnailImage(asset);\n    },\n    select(template) {\n      this.selected = template;\n      console.log(\"Selected template \", this.selected.name);\n      this.mode = 'template';\n      this.templater = new templating.Templater();\n      (async () => {\n        const resp = await showpad.getAssetById(\n          this.selected.id, await showpad.getApiConfig()\n        );\n        console.log(resp);\n        const fullAsset = resp.response;\n        const downloadUrl = fullAsset.shortLivedDownloadLink;\n        console.log(downloadUrl);\n        const file = await (await fetch(downloadUrl)).blob();\n        const vars = await this.templater.parse(file);\n        this.vars = vars;\n      })();\n    },\n    reset() {\n      this.selected = undefined;\n      this.templater = undefined;\n      this.vars = undefined;\n      this.inputError = undefined;\n      this.finalMap = undefined;\n      this.blob = undefined;\n      this.name = \"\";\n      this.mode = \"begin\";\n    },\n    generate() {\n      const form_elems = document.getElementsByClassName('form_field');\n      for (const elem of form_elems) {\n        const label = elem.children[0].firstChild.innerText;\n        const input = elem.children[1].firstChild.value;\n        if (input == \"\") {\n          this.inputError = \"Please fill all of the boxes.\"\n          return;\n        }\n      }\n      this.inputError = undefined;\n      this.finalMap = {};\n      for (const elem of form_elems) {\n        const label = elem.children[0].firstChild.innerText;\n        const input = elem.children[1].firstChild.value;\n        this.finalMap[label] = input;\n      }\n      // do stuff with final map\n      console.log(this.finalMap);\n      (async () => {\n        this.blob = await this.templater.replace(this.finalMap);\n        const dt = new Date()\n        const date_part = dt.getFullYear().toString() + '_' + dt.getMonth().toString() + '_' + dt.getDay().toString() + '_'\n        this.name = date_part + this.selected.name\n        this.mode = \"confirm\";\n      })()\n    },\n    downloadBlob() {\n      if (this.name.length < 1) {\n        this.inputError = \"Please provide a filename.\";\n        return;\n      } else if ((!this.name.toLowerCase().endsWith('.docx')) && (!this.name.toLowerCase().endsWith('.pptx'))) {\n        this.inputError = \"Please include a file extension.\";\n        return;\n      } else {\n        this.inputError = \"\";\n      }\n      showpad.saveLocally(this.blob, this.name);\n    },\n    myFilesBlob() {\n      if (this.name.length < 1) {\n        this.inputError = \"Please provide a filename.\";\n        return;\n      } else if ((!this.name.toLowerCase().endsWith('.docx')) && (!this.name.toLowerCase().endsWith('.pptx'))) {\n        this.inputError = \"Please include a file extension.\";\n        return;\n      } else {\n        this.inputError = \"\";\n      }\n      showpad.saveToMyFiles(this.blob, this.name);\n    }\n  }\n}\n</script>\n\n<style scoped>\nbutton {\n  padding: 15px;\n  border-radius: 10px;\n  color: darkslategrey;\n  border-color: white;\n}\n\n\n.ok_b {\n  background-color: lightgreen;\n}\n\n.ok_b_b {\n  background-color: lightskyblue;\n}\n\n.finalb {\n  margin-top: 20px;\n}\n\n#inputError {\n  padding: 10px;\n  background-color: white;\n  color: lightcoral;\n  border-color: lightcoral;\n  border-style: solid;\n  border-width: 1px;\n  border-radius: 5px;\n  border-top-left-radius: 0px;\n  max-width: 190px;\n  margin: auto;\n  margin-bottom: 15px;\n}\n\ntable {\n  position: relative;\n  right: 20px;\n  margin:auto;\n  margin-bottom: 10px;\n}\n\ntd {\n  text-align: right;\n}\n\nlabel {\n  font-size: 20px;\n  text-align: left;\n  margin-right: 10px;\n}\n\ninput {\n  min-width: 300px;\n  border-radius: 5px;\n  margin-bottom: 5px;\n  border-style: solid;\n  border-color: lightgrey;\n  border-width: 1px;\n  height: 24px;\n  font-size: 20px;\n  color: darkslategrey;\n}\n\ninput:focus,\nselect:focus,\ntextarea:focus,\nbutton:focus {\n    outline: none;\n}\n\n.form_field {\n  max-width: 500px;\n  margin: auto;\n  padding: 5px;\n}\n\n#wrapper {\n  padding-top: 10px;\n  padding-bottom: 20px;\n  background-color: whitesmoke;\n  color: darkslategrey;\n  border-radius: 20px;\n  max-width: 800px;\n  margin: auto;\n}\n\n#template-container {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n}\n.template {\n  display: inline-block;\n  justify-content: center;\n  border-color: lightgray;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 5px;\n  padding: 5px;\n  margin: 5px;\n  transition: background-color .4s;\n}\n.template:hover {\n  cursor: pointer;\n  background-color: white;\n  transition: background-color .4s;\n}\n.t_image {\n  max-height: 150px;\n}\n\n.slide-fade-enter-active {\n  transition: all .3s ease;\n}\n\n.slide-fade-enter, .slide-fade-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateY(10px);\n  opacity: 0;\n}\n\n.slide-fade-side-enter-active {\n  transition: all .4s ease;\n}\n\n.slide-fade-side-enter, .slide-fade-side-leave-to\n/* .slide-fade-leave-active below version 2.1.8 */ {\n  transform: translateX(10px);\n  opacity: 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SlideshowTemplater.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"wrapper\"}},[_c('transition',{attrs:{\"name\":\"slide-fade\"}},[(_vm.mode == 'begin')?_c('div',[_c('h1',[_vm._v(\"Select a template:\")]),_vm._v(\" \"),(_vm.templates.length == 0)?_c('span',[_vm._v(\"Loading templates...\")]):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"template_container\"}},[_c('transition-group',{attrs:{\"name\":\"slide-fade\",\"tag\":\"div\"}},_vm._l((_vm.templates),function(template){return _c('fieldset',{key:template.id,staticClass:\"template\",on:{\"click\":function($event){return _vm.select(template)}}},[_c('legend',{staticClass:\"t_name\"},[_vm._v(_vm._s(template.name))]),_vm._v(\" \"),_c('div',[_c('img',{staticClass:\"t_image\",attrs:{\"src\":_vm.getThumbnailImage(template)}})])])}),0)],1)]):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-fade\"}},[(_vm.mode == 'template')?_c('div',[_c('h1',[_vm._v(\"Specify Substitutions:\")]),_vm._v(\" \"),(!_vm.vars)?_c('span',[_vm._v(\"Processing template...\")]):_vm._e(),_vm._v(\" \"),_c('table',[_c('transition-group',{attrs:{\"name\":\"slide-fade-side\",\"tag\":\"div\"}},_vm._l((_vm.vars),function(varName){return _c('tr',{key:varName,staticClass:\"form_field\"},[_c('td',[_c('label',[_vm._v(_vm._s(varName))])]),_vm._v(\" \"),_c('td',[_c('input',{attrs:{\"type\":\"text\"}})])])}),0)],1),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-fade-side\"}},[(_vm.inputError)?_c('div',{attrs:{\"id\":\"inputError\"}},[_vm._v(_vm._s(_vm.inputError))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"button_container\"},[_c('button',{on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('button',{staticClass:\"ok_b\",on:{\"click\":function($event){return _vm.generate()}}},[_vm._v(\"Generate Document\")])])],1):_vm._e()]),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-fade\"}},[(_vm.mode == 'confirm')?_c('div',[_c('h1',[_vm._v(\"Download:\")]),_vm._v(\" \"),_c('label',[_vm._v(\"Filename:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}}),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide-fade-side\"}},[(_vm.inputError)?_c('div',{attrs:{\"id\":\"inputError\"}},[_vm._v(_vm._s(_vm.inputError))]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"button_container\"},[_c('button',{staticClass:\"ok_b finalb\",on:{\"click\":function($event){return _vm.downloadBlob()}}},[_vm._v(\"Download\")]),_vm._v(\" \"),_c('button',{staticClass:\"ok_b_b finalb\",on:{\"click\":function($event){return _vm.myFilesBlob()}}},[_vm._v(\"Upload to My Files\")])]),_vm._v(\" \"),_c('button',{staticClass:\"finalb\",on:{\"click\":function($event){return _vm.reset()}}},[_vm._v(\"Return to Templates\")])],1):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3de4d1a4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SlideshowTemplater.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3de4d1a4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SlideshowTemplater.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SlideshowTemplater.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SlideshowTemplater.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3de4d1a4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SlideshowTemplater.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3de4d1a4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SlideshowTemplater.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <SlideshowTemplater/>\n  </div>\n</template>\n\n<script>\nimport SlideshowTemplater from './components/SlideshowTemplater'\n\nexport default {\n  name: 'App',\n  components: {\n    SlideshowTemplater\n  }\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 10px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('SlideshowTemplater')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e4bbcae\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e4bbcae\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e4bbcae\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}